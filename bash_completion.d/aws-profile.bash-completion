#/usr/bin/env bash

# Ref:
#   https://iridakos.com/programming/2018/03/01/bash-programmable-completion-tutorial

_aws_profiles() {

  _profiles="$( awk '/^\[profile/ {print $2}' ~/.aws/config | tr -d ']'  ) "

  COMPREPLY=( $(compgen -W "${_profiles}" "${COMP_WORDS[1]}") )
# echo [$COMPREPLY]
}

complete -F _aws_profiles aws-profile
